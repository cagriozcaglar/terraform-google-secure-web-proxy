# autogenerated - do not edit
apiVersion: blueprints.cloud.google.com/v1alpha1
kind: BlueprintMetadata
metadata:
  name: terraform-google-secure-web-proxy
  source:
    repo: https://github.com/GoogleCloudPlatform/terraform-google-secure-web-proxy
    sourceType: git
spec:
  info:
    title: Secure Web Proxy Module
    version: 1.0.0
    actuationTool:
      type: Terraform
      versions:
      - '>= 1.3.0'
    description:
      tagline: Deploys a Google Cloud Secure Web Proxy instance with associated policies and rules.
      detailed: This module automates the deployment of Google Cloud's Secure Web Proxy (SWP). It creates a gateway, attaches it to a specified proxy-only subnet within a VPC, and associates it with a gateway security policy. The policy can be populated with user-defined rules for fine-grained traffic control, including TLS inspection capabilities via Certificate Manager integration.
    icon: https://cloud.google.com/images/products/icons/secure-web-proxy.svg
    documentations: []
    examples:
    - name: simple_example
      location: examples/simple_example
      title: Basic SWP Deployment
  interfaces:
    variables:
    - name: project_id
      description: The ID of the Google Cloud project where the resources will be created.
      type: string
      required: true
    - name: name
      description: A base name for the Secure Web Proxy resources, which will be used to name the gateway and security policy.
      type: string
      required: true
    - name: location
      description: The Google Cloud region where the Secure Web Proxy gateway will be deployed.
      type: string
      required: true
    - name: network
      description: The self-link of the VPC network to which the gateway is attached.
      type: string
      required: true
    - name: subnetwork
      description: The self-link of the subnet to which the gateway is attached. This subnet must be a proxy-only subnet.
      type: string
      required: true
    - name: rules
      description: A list of objects representing the security policy rules to create. `priority` is a number between 1 and 1000, where lower numbers indicate higher precedence. `basic_profile` must be one of 'ALLOW' or 'DENY'. `session_matcher` and `application_matcher` use Common Expression Language (CEL).
      type: List<Object>
      required: false
      default: []
    - name: gateway_description
      description: An optional description for the Secure Web Proxy gateway.
      type: string
      required: false
      default: null
    - name: policy_description
      description: An optional description for the Gateway Security Policy.
      type: string
      required: false
      default: null
    - name: tls_inspection_policy
      description: The resource name of the Certificate Manager CA Pool to use for TLS inspection. Format `projects/{project}/locations/{location}/caPools/{ca_pool}`. If not set, TLS inspection is disabled for the policy.
      type: string
      required: false
      default: null
    - name: scope
      description: A user-defined scope name for the gateway. This is used to organize gateways.
      type: string
      required: false
      default: default-scope
    - name: ports
      description: A list of ports that the gateway will listen on. Supported ports are 80 and 443.
      type: List<Number>
      required: false
      default:
      - 443
    variableGroups:
    - name: Required Settings
      description: Core configuration required to deploy the Secure Web Proxy.
      variables:
      - project_id
      - name
      - location
      - network
      - subnetwork
    - name: Security Policy Configuration
      description: Variables for defining the security policy and its rules.
      variables:
      - policy_description
      - tls_inspection_policy
      - rules
    - name: Gateway Configuration
      description: Optional settings for the proxy gateway instance.
      variables:
      - gateway_description
      - scope
      - ports
    outputs:
    - name: gateway_id
      description: The unique identifier of the created Secure Web Proxy gateway.
    - name: gateway_name
      description: The name of the created Secure Web Proxy gateway.
    - name: gateway_self_link
      description: The self-link of the created Secure Web Proxy gateway.
    - name: policy_id
      description: The unique identifier of the created Gateway Security Policy.
    - name: policy_name
      description: The name of the created Gateway Security Policy.
    - name: rule_names
      description: A list of the names of the security policy rules that were created.
  requirements:
    roles:
    - level: Project
      roles:
      - roles/networksecurity.admin
      - roles/networkservices.admin
      - roles/compute.networkAdmin
      - roles/certificatemanager.viewer
    services:
    - networksecurity.googleapis.com
    - networkservices.googleapis.com
    - compute.googleapis.com
    - certificatemanager.googleapis.com
